import{_ as L,a as v,r,o as i,c as o,b as t,d as h,F as _,f as b,t as l,w as k,e as y}from"./index-30b6f64c.js";const{VITE_URL:u,VITE_PATH:g}={VITE_URL:"https://vue3-course-api.hexschool.io",VITE_PATH:"payroom",BASE_URL:"/week7/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},V={data(){return{productList:[],loadingItem:"",isLoading:!1}},methods:{getProducts(){this.isLoading=!0,this.$http.get(`${u}/v2/api/${g}/products`).then(s=>{this.productList=s.data.products,this.isLoading=!1}).catch(s=>{console.log(s)})},addToCart(s,n=1){const c={product_id:s,qty:n};this.loadingItem=s,this.isLoading=!0,this.$http.post(`${u}/v2/api/${g}/cart`,{data:c}).then(()=>{this.isLoading=!1}).catch(d=>{console.log(d)}).finally(()=>{this.loadingItem=""})}},mounted(){this.getProducts()},components:{RouterLink:v}},x={class:"vl-parent"},T=t("h3",{class:"mt-5 mb-3 text-center"},"商品列表",-1),E={class:"vl-parent"},I={class:"table align-middle"},R=t("thead",null,[t("tr",null,[t("th",null,"圖片"),t("th",null,"商品名稱"),t("th",null,"價格"),t("th")])],-1),$={style:{width:"200px"}},w=["src","alt"],C={key:0,class:"h5"},P={key:1},U={class:"h6"},B={class:"h5"},D=["disabled","onClick"];function S(s,n,c,d,a,p){const m=r("VLoading"),f=r("RouterLink");return i(),o(_,null,[t("div",x,[h(m,{active:a.isLoading,"onUpdate:active":n[0]||(n[0]=e=>a.isLoading=e),"can-cancel":!1,"is-full-page":!0},null,8,["active"])]),T,t("div",E,[t("table",I,[R,t("tbody",null,[(i(!0),o(_,null,b(a.productList,e=>(i(),o("tr",{key:e.id,ref_for:!0,ref:e.id},[t("td",$,[t("img",{src:e.imageUrl,alt:`${e.title}圖片`,style:{height:"100px","object-fit":"cover"},class:"w-100"},null,8,w)]),t("td",null,l(e.title),1),t("td",null,[e.origin_price===e.price?(i(),o("div",C,l(e.price)+"元 ",1)):(i(),o("div",P,[t("del",U,"原價"+l(e.origin_price)+"元",1),t("div",B,"現在只要"+l(e.price)+"元",1)]))]),t("td",null,[h(f,{to:`/product/${e.id}`,class:"me-3 btn btn-outline-primary"},{default:k(()=>[y("查看更多")]),_:2},1032,["to"]),t("button",{type:"button",class:"btn btn-outline-danger",disabled:a.loadingItem===e.id,onClick:A=>p.addToCart(e.id)}," 加入購物車 ",8,D)])]))),128))])])])],64)}const F=L(V,[["render",S]]);export{F as default};
